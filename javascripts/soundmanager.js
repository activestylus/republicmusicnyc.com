/** @license


 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20120527
*/
(function(a){function b(b,c){function d(a){return function(b){var c=this._t;return!c||!c._a?(c&&c.sID?h._wD(j+"ignoring "+b.type+": "+c.sID):h._wD(j+"ignoring "+b.type),b=null):b=a.call(this,b),b}}this.flashVersion=8,this.debugMode=!0,this.debugFlash=!1,this.consoleOnly=this.useConsole=!0,this.waitForWindowLoad=!1,this.bgColor="#ffffff",this.useHighPerformance=!1,this.html5PollingInterval=this.flashPollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.noSWFCache=!1,this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.movieID="sm2-container",this.id=c||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20120527",this.movieURL=this.version=null,this.url=b||null,this.altURL=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};var e;try{e="undefined"!=typeof Audio&&"undefined"!=typeof (new Audio).canPlayType}catch(f){e=!1}this.hasHTML5=e,this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var g,h=this,i=null,j="HTML5::",k,l=navigator.userAgent,m=a,n=m.location.href.toString(),o=document,p,q,r,s=[],t=!0,u,v=!1,w=!1,x=!1,y=!1,z=!1,A,B=0,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=["log","info","warn","error"],X,Y,Z,$=null,_=null,ba,bb,bc,bd,be,bf,bg,bh,bi=!1,bj=!1,bk,bl,bm,bn=0,bo=null,bp,bq=null,br,bs,bt,bu,bv,bw,bx,by,bz=Array.prototype.slice,bA=!1,bB,bC,bD,bE,bF,bG=l.match(/(ipad|iphone|ipod)/i),bH=l.match(/firefox/i),bI=l.match(/msie/i),bJ=l.match(/webkit/i),bK=l.match(/safari/i)&&!l.match(/chrome/i),bL=l.match(/opera/i),bM=l.match(/(mobile|pre\/|xoom)/i)||bG,bN=!n.match(/usehtml5audio/i)&&!n.match(/sm2\-ignorebadua/i)&&bK&&!l.match(/silk/i)&&l.match(/OS X 10_6_([3-7])/i),bO="undefined"!=typeof console&&"undefined"!=typeof console.log,bP="undefined"!=typeof o.hasFocus?o.hasFocus():null,bQ=bK&&("undefined"==typeof o.hasFocus||!o.hasFocus()),bR=!bQ,bS=/(mp3|mp4|mpa)/i,bT=o.location?o.location.protocol.match(/http/i):null,bU=bT?"":"http://",bV=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,bW="mpeg4,aac,flv,mov,mp4,m4v,f4v,m4a,mp4v,3gp,3g2".split(","),bX=RegExp("\\.("+bW.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!bT,this._global_a=null,bM&&(h.useHTML5Audio=!0,h.preferFlash=!1,bG)&&(bA=h.ignoreFlash=!0),this.supported=this.ok=function(){return bq?x&&!y:h.useHTML5Audio&&h.hasHTML5},this.getMovie=function(a){return k(a)||o[a]||m[a]},this.createSound=function(a,b){function c(){return e=be(e),h.sounds[f.id]=new g(f),h.soundIDs.push(f.id),h.sounds[f.id]}var d,e=null,f=d=null;d="soundManager.createSound(): "+ba(x?"notOK":"notReady");if(!x||!h.ok())return bg(d),!1;"undefined"!=typeof b&&(a={id:a,url:b}),e=D(a),e.url=bp(e.url),f=e,f.id.toString().charAt(0).match(/^[0-9]$/)&&h._wD("soundManager.createSound(): "+ba("badID",f.id),2),h._wD("soundManager.createSound(): "+f.id+" ("+f.url+")",1);if(bh(f.id,!0))return h._wD("soundManager.createSound(): "+f.id+" exists",1),h.sounds[f.id];if(bs(f))d=c(),h._wD("Loading sound "+f.id+" via HTML5"),d._setup_html5(f);else{8<r&&(null===f.isMovieStar&&(f.isMovieStar=f.serverURL||(f.type?f.type.match(bV):!1)||f.url.match(bX)),f.isMovieStar&&(h._wD("soundManager.createSound(): using MovieStar handling"),1<f.loops&&A("noNSLoop"))),f=bf(f,"soundManager.createSound(): "),d=c();if(8===r)i._createSound(f.id,f.loops||1,f.usePolicyFile);else if(i._createSound(f.id,f.url,f.usePeakData,f.useWaveformData,f.useEQData,f.isMovieStar,f.isMovieStar?f.bufferTime:!1,f.loops||1,f.serverURL,f.duration||null,f.autoPlay,!0,f.autoLoad,f.usePolicyFile),!f.serverURL)d.connected=!0,f.onconnect&&f.onconnect.apply(d);!f.serverURL&&(f.autoLoad||f.autoPlay)&&d.load(f)}return!f.serverURL&&f.autoPlay&&d.play(),d},this.destroySound=function(a,b){if(!bh(a))return!1;var c=h.sounds[a],d;c._iO={},c.stop(),c.unload();for(d=0;d<h.soundIDs.length;d++)if(h.soundIDs[d]===a){h.soundIDs.splice(d,1);break}return b||c.destruct(!0),delete h.sounds[a],!0},this.load=function(a,b){return bh(a)?h.sounds[a].load(b):!1},this.unload=function(a){return bh(a)?h.sounds[a].unload():!1},this.onposition=this.onPosition=function(a,b,c,d){return bh(a)?h.sounds[a].onposition(b,c,d):!1},this.clearOnPosition=function(a,b,c){return bh(a)?h.sounds[a].clearOnPosition(b,c):!1},this.start=this.play=function(a,b){var c=!1;return!x||!h.ok()?(bg("soundManager.play(): "+ba(x?"notOK":"notReady")),c):bh(a)?h.sounds[a].play(b):(b instanceof Object||(b={url:b}),b&&b.url&&(h._wD('soundManager.play(): attempting to create "'+a+'"',1),b.id=a,c=h.createSound(b).play()),c)},this.setPosition=function(a,b){return bh(a)?h.sounds[a].setPosition(b):!1},this.stop=function(a){return bh(a)?(h._wD("soundManager.stop("+a+")",1),h.sounds[a].stop()):!1},this.stopAll=function(){var a;h._wD("soundManager.stopAll()",1);for(a in h.sounds)h.sounds.hasOwnProperty(a)&&h.sounds[a].stop()},this.pause=function(a){return bh(a)?h.sounds[a].pause():!1},this.pauseAll=function(){var a;for(a=h.soundIDs.length-1;0<=a;a--)h.sounds[h.soundIDs[a]].pause()},this.resume=function(a){return bh(a)?h.sounds[a].resume():!1},this.resumeAll=function(){var a;for(a=h.soundIDs.length-1;0<=a;a--)h.sounds[h.soundIDs[a]].resume()},this.togglePause=function(a){return bh(a)?h.sounds[a].togglePause():!1},this.setPan=function(a,b){return bh(a)?h.sounds[a].setPan(b):!1},this.setVolume=function(a,b){return bh(a)?h.sounds[a].setVolume(b):!1},this.mute=function(a){var b=0;"string"!=typeof a&&(a=null);if(a)return bh(a)?(h._wD('soundManager.mute(): Muting "'+a+'"'),h.sounds[a].mute()):!1;h._wD("soundManager.mute(): Muting all sounds");for(b=h.soundIDs.length-1;0<=b;b--)h.sounds[h.soundIDs[b]].mute();return h.muted=!0},this.muteAll=function(){h.mute()},this.unmute=function(a){"string"!=typeof a&&(a=null);if(a)return bh(a)?(h._wD('soundManager.unmute(): Unmuting "'+a+'"'),h.sounds[a].unmute()):!1;h._wD("soundManager.unmute(): Unmuting all sounds");for(a=h.soundIDs.length-1;0<=a;a--)h.sounds[h.soundIDs[a]].unmute();return h.muted=!1,!0},this.unmuteAll=function(){h.unmute()},this.toggleMute=function(a){return bh(a)?h.sounds[a].toggleMute():!1},this.getMemoryUse=function(){var a=0;return i&&8!==r&&(a=parseInt(i._getMemoryUse(),10)),a},this.disable=function(a){var b;"undefined"==typeof a&&(a=!1);if(y)return!1;y=!0,A("shutdown",1);for(b=h.soundIDs.length-1;0<=b;b--)X(h.sounds[h.soundIDs[b]]);return C(a),by.remove(m,"load",G),!0},this.canPlayMIME=function(a){var b;return h.hasHTML5&&(b=bt({type:a})),!b&&bq&&(b=a&&h.ok()?!!(8<r&&a.match(bV)||a.match(h.mimePattern)):null),b},this.canPlayURL=function(a){var b;return h.hasHTML5&&(b=bt({url:a})),!b&&bq&&(b=a&&h.ok()?!!a.match(h.filePattern):null),b},this.canPlayLink=function(a){return"undefined"!=typeof a.type&&a.type&&h.canPlayMIME(a.type)?!0:h.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)throw Error("soundManager.getSoundById(): sID is null/undefined");var c=h.sounds[a];return!c&&!b&&h._wD('"'+a+'" is an invalid sound ID.',2),c},this.onready=function(a,b){var c=!1;if("function"==typeof a)x&&h._wD(ba("queue","onready")),b||(b=m),E("onready",a,b),F();else throw ba("needFunction","onready");return!0},this.ontimeout=function(a,b){var c=!1;if("function"==typeof a)x&&h._wD(ba("queue","ontimeout")),b||(b=m),E("ontimeout",a,b),F({type:"ontimeout"});else throw ba("needFunction","ontimeout");return!0},this._wD=this._writeDebug=function(a,b,c){var d,e;if(!h.debugMode)return!1;"undefined"!=typeof c&&c&&(a=a+" | "+(new Date).getTime());if(bO&&h.useConsole){c=V[b],"undefined"!=typeof console[c]?console[c](a):console.log(a);if(h.consoleOnly)return!0}try{d=k("soundmanager-debug");if(!d)return!1;e=o.createElement("div"),0===++B%2&&(e.className="sm2-alt"),b="undefined"==typeof b?0:parseInt(b,10),e.appendChild(o.createTextNode(a)),b&&(2<=b&&(e.style.fontWeight="bold"),3===b&&(e.style.color="#ff3333")),d.insertBefore(e,d.firstChild)}catch(f){}return!0},this._debug=function(){var a,b;A("currentObj",1);for(a=0,b=h.soundIDs.length;a<b;a++)h.sounds[h.soundIDs[a]]._debug()},this.reboot=function(){h._wD("soundManager.reboot()"),h.soundIDs.length&&h._wD("Destroying "+h.soundIDs.length+" SMSound objects...");var a,b;for(a=h.soundIDs.length-1;0<=a;a--)h.sounds[h.soundIDs[a]].destruct();try{bI&&(_=i.innerHTML),$=i.parentNode.removeChild(i),h._wD("Flash movie removed.")}catch(c){A("badRemove",2)}_=$=bq=null,h.enabled=P=x=bi=bj=v=w=y=h.swfLoaded=!1,h.soundIDs=[],h.sounds={},i=null;for(a in s)if(s.hasOwnProperty(a))for(b=s[a].length-1;0<=b;b--)s[a][b].fired=!1;h._wD("soundManager: Rebooting..."),m.setTimeout(h.beginDelayedInit,20)},this.getMoviePercent=function(){return i&&"undefined"!=typeof i.PercentLoaded?i.PercentLoaded():null},this.beginDelayedInit=function(){z=!0,N(),setTimeout(function(){return bj?!1:(R(),M(),bj=!0)},20),H()},this.destruct=function(){h._wD("soundManager.destruct()"),h.disable(!0)},g=function(a){var b,c,d=this,e,f,g,k,l,m,n=!1,o=[],p=0,q,s,t=null;b=null,c=null,this.sID=a.id,this.url=a.url,this._iO=this.instanceOptions=this.options=D(a),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(h.debugMode){var a=null,b=[],c,e;for(a in d.options)null!==d.options[a]&&("function"==typeof d.options[a]?(c=d.options[a].toString(),c=c.replace(/\s\s+/g," "),e=c.indexOf("{"),b.push(" "+a+": {"+c.substr(e+1,Math.min(Math.max(c.indexOf("\n")-1,64),64)).replace(/\n/g,"")+"... }")):b.push(" "+a+": "+d.options[a]));h._wD("SMSound() merged options: {\n"+b.join(", \n")+"\n}")}},this._debug(),this.load=function(a){var b=null;if("undefined"!=typeof a)d._iO=D(a,d.options),d.instanceOptions=d._iO;else if(a=d.options,d._iO=a,d.instanceOptions=d._iO,t&&t!==d.url)A("manURL"),d._iO.url=d.url,d.url=null;d._iO.url||(d._iO.url=d.url),d._iO.url=bp(d._iO.url),h._wD("SMSound.load(): "+d._iO.url,1);if(d._iO.url===d.url&&0!==d.readyState&&2!==d.readyState)return A("onURL",1),3===d.readyState&&d._iO.onload&&d._iO.onload.apply(d,[!!d.duration]),d;a=d._iO,t=d.url,d.loaded=!1,d.readyState=1,d.playState=0;if(bs(a))b=d._setup_html5(a),b._called_load?h._wD(j+"ignoring request to load again: "+d.sID):(h._wD(j+"load: "+d.sID),d._html5_canplay=!1,d._a.autobuffer="auto",d._a.preload="auto",b._called_load=!0,a.autoPlay?d.play():b.load());else try{d.isHTML5=!1,d._iO=bf(be(a)),a=d._iO,8===r?i._load(d.sID,a.url,a.stream,a.autoPlay,a.whileloading?1:0,a.loops||1,a.usePolicyFile):i._load(d.sID,a.url,!!a.stream,!!a.autoPlay,a.loops||1,!!a.autoLoad,a.usePolicyFile)}catch(c){A("smError",2),u("onload",!1),S({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return d},this.unload=function(){return 0!==d.readyState&&(h._wD('SMSound.unload(): "'+d.sID+'"'),d.isHTML5?(k(),d._a&&(d._a.pause(),bv(d._a))):8===r?i._unload(d.sID,"about:blank"):i._unload(d.sID),e()),d},this.destruct=function(a){h._wD('SMSound.destruct(): "'+d.sID+'"');if(d.isHTML5){if(k(),d._a)d._a.pause(),bv(d._a),bA||g(),d._a._t=null,d._a=null}else d._iO.onfailure=null,i._destroySound(d.sID);a||h.destroySound(d.sID,!0)},this.start=this.play=function(a,b){var c,e,f;e=null,b="undefined"==typeof b?!0:b,a||(a={}),d._iO=D(a,d._iO),d._iO=D(d._iO,d.options),d._iO.url=bp(d._iO.url),d.instanceOptions=d._iO;if(d._iO.serverURL&&!d.connected)return d.getAutoPlay()||(h._wD("SMSound.play():  Netstream not connected yet - setting autoPlay"),d.setAutoPlay(!0)),d;bs(d._iO)&&(d._setup_html5(d._iO),l()),1===d.playState&&!d.paused&&((c=d._iO.multiShot)?h._wD('SMSound.play(): "'+d.sID+'" already playing (multi-shot)',1):(h._wD('SMSound.play(): "'+d.sID+'" already playing (one-shot)',1),e=d));if(null!==e)return e;d.loaded?h._wD('SMSound.play(): "'+d.sID+'"'):0===d.readyState?(h._wD('SMSound.play(): Attempting to load "'+d.sID+'"',1),d.isHTML5?bG&&d.load(d._iO):(d._iO.autoPlay=!0,d.load(d._iO))):2===d.readyState?(h._wD('SMSound.play(): Could not load "'+d.sID+'" - exiting',2),e=d):h._wD('SMSound.play(): "'+d.sID+'" is loading - attempting to play..',1);if(null!==e)return e;!d.isHTML5&&9===r&&0<d.position&&d.position===d.duration&&(h._wD('SMSound.play(): "'+d.sID+'": Sound at end, resetting to position:0'),a.position=0);if(d.paused&&d.position&&0<d.position)h._wD('SMSound.play(): "'+d.sID+'" is resuming from paused state',1),d.resume();else{d._iO=D(a,d._iO);if(null!==d._iO.from&&null!==d._iO.to&&0===d.instanceCount&&0===d.playState&&!d._iO.serverURL){c=function(){d._iO=D(a,d._iO),d.play(d._iO)},d.isHTML5&&!d._html5_canplay?(h._wD('SMSound.play(): Beginning load of "'+d.sID+'" for from/to case'),d.load({_oncanplay:c}),e=!1):!d.isHTML5&&!d.loaded&&(!d.readyState||2!==d.readyState)&&(h._wD('SMSound.play(): Preloading "'+d.sID+'" for from/to case'),d.load({onload:c}),e=!1);if(null!==e)return e;d._iO=s()}h._wD('SMSound.play(): "'+d.sID+'" is starting to play'),(!d.instanceCount||d._iO.multiShotEvents||!d.isHTML5&&8<r&&!d.getAutoPlay())&&d.instanceCount++,d._iO.onposition&&0===d.playState&&m(d),d.playState=1,d.paused=!1,d.position="undefined"!=typeof d._iO.position&&!isNaN(d._iO.position)?d._iO.position:0,d.isHTML5||(d._iO=bf(be(d._iO))),d._iO.onplay&&b&&(d._iO.onplay.apply(d),n=!0),d.setVolume(d._iO.volume,!0),d.setPan(d._iO.pan,!0),d.isHTML5?(l(),e=d._setup_html5(),d.setPosition(d._iO.position),e.play()):f=i._start(d.sID,d._iO.loops||1,9===r?d._iO.position:d._iO.position/1e3,d._iO.multiShot),9===r&&!f&&(h._wD("SMSound.play(): "+d.sID+": No sound hardware, or 32-sound ceiling hit"),d._iO.onplayerror&&d._iO.onplayerror.apply(d))}return d},this.stop=function(a){var b=d._iO;return 1===d.playState&&(d._onbufferchange(0),d._resetOnPosition(0),d.paused=!1,d.isHTML5||(d.playState=0),q(),b.to&&d.clearOnPosition(b.to),d.isHTML5?d._a&&(a=d.position,d.setPosition(0),d.position=a,d._a.pause(),d.playState=0,d._onTimer(),k()):(i._stop(d.sID,a),b.serverURL&&d.unload()),d.instanceCount=0,d._iO={},b.onstop&&b.onstop.apply(d)),d},this.setAutoPlay=function(a){h._wD("sound "+d.sID+" turned autoplay "+(a?"on":"off")),d._iO.autoPlay=a,d.isHTML5||(i._setAutoPlay(d.sID,a),a&&!d.instanceCount&&1===d.readyState&&(d.instanceCount++,h._wD("sound "+d.sID+" incremented instance count to "+d.instanceCount)))},this.getAutoPlay=function(){return d._iO.autoPlay},this.setPosition=function(a){"undefined"==typeof a&&(a=0);var b=d.isHTML5?Math.max(a,0):Math.min(d.duration||d._iO.duration,Math.max(a,0));d.position=b,a=d.position/1e3,d._resetOnPosition(d.position),d._iO.position=b;if(d.isHTML5){if(d._a)if(d._html5_canplay){if(d._a.currentTime!==a){h._wD("setPosition("+a+"): setting position");try{d._a.currentTime=a,(0===d.playState||d.paused)&&d._a.pause()}catch(c){h._wD("setPosition("+a+"): setting position failed: "+c.message,2)}}}else h._wD("setPosition("+a+"): delaying, sound not ready")}else a=9===r?d.position:a,d.readyState&&2!==d.readyState&&i._setPosition(d.sID,a,d.paused||!d.playState,d._iO.multiShot);return d.isHTML5&&d.paused&&d._onTimer(!0),d},this.pause=function(a){return d.paused||0===d.playState&&1!==d.readyState?d:(h._wD("SMSound.pause()"),d.paused=!0,d.isHTML5?(d._setup_html5().pause(),k()):(a||"undefined"==typeof a)&&i._pause(d.sID,d._iO.multiShot),d._iO.onpause&&d._iO.onpause.apply(d),d)},this.resume=function(){var a=d._iO;return d.paused?(h._wD("SMSound.resume()"),d.paused=!1,d.playState=1,d.isHTML5?(d._setup_html5().play(),l()):(a.isMovieStar&&!a.serverURL&&d.setPosition(d.position),i._pause(d.sID,a.multiShot)),!n&&a.onplay?(a.onplay.apply(d),n=!0):a.onresume&&a.onresume.apply(d),d):d},this.togglePause=function(){return h._wD("SMSound.togglePause()"),0===d.playState?(d.play({position:9===r&&!d.isHTML5?d.position:d.position/1e3}),d):(d.paused?d.resume():d.pause(),d)},this.setPan=function(a,b){return"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=!1),d.isHTML5||i._setPan(d.sID,a),d._iO.pan=a,b||(d.pan=a,d.options.pan=a),d},this.setVolume=function(a,b){return"undefined"==typeof a&&(a=100),"undefined"==typeof b&&(b=!1),d.isHTML5?d._a&&(d._a.volume=Math.max(0,Math.min(1,a/100))):i._setVolume(d.sID,h.muted&&!d.muted||d.muted?0:a),d._iO.volume=a,b||(d.volume=a,d.options.volume=a),d},this.mute=function(){return d.muted=!0,d.isHTML5?d._a&&(d._a.muted=!0):i._setVolume(d.sID,0),d},this.unmute=function(){d.muted=!1;var a="undefined"!=typeof d._iO.volume;return d.isHTML5?d._a&&(d._a.muted=!1):i._setVolume(d.sID,a?d._iO.volume:d.options.volume),d},this.toggleMute=function(){return d.muted?d.unmute():d.mute()},this.onposition=this.onPosition=function(a,b,c){return o.push({position:parseInt(a,10),method:b,scope:"undefined"!=typeof c?c:d,fired:!1}),d},this.clearOnPosition=function(a,b){var c,a=parseInt(a,10);if(isNaN(a))return!1;for(c=0;c<o.length;c++)a===o[c].position&&(!b||b===o[c].method)&&(o[c].fired&&p--,o.splice(c,1))},this._processOnPosition=function(){var a,b;a=o.length;if(!a||!d.playState||p>=a)return!1;for(a-=1;0<=a;a--)if(b=o[a],!b.fired&&d.position>=b.position)b.fired=!0,p++,b.method.apply(b.scope,[b.position]);return!0},this._resetOnPosition=function(a){var b,c;b=o.length;if(!b)return!1;for(b-=1;0<=b;b--)if(c=o[b],c.fired&&a<=c.position)c.fired=!1,p--;return!0},s=function(){var a=d._iO,b=a.from,c=a.to,e,f;return f=function(){h._wD(d.sID+': "to" time of '+c+" reached."),d.clearOnPosition(c,f),d.stop()},e=function(){h._wD(d.sID+': playing "from" '+b),null!==c&&!isNaN(c)&&d.onPosition(c,f)},null!==b&&!isNaN(b)&&(a.position=b,a.multiShot=!1,e()),a},m=function(){var a,b=d._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&d.onPosition(parseInt(a,10),b[a])},q=function(){var a,b=d._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&d.clearOnPosition(parseInt(a,10))},l=function(){d.isHTML5&&bk(d)},k=function(){d.isHTML5&&bl(d)},e=function(a){a||(o=[],p=0),n=!1,d._hasTimer=null,d._a=null,d._html5_canplay=!1,d.bytesLoaded=null,d.bytesTotal=null,d.duration=d._iO&&d._iO.duration?d._iO.duration:null,d.durationEstimate=null,d.eqData=[],d.eqData.left=[],d.eqData.right=[],d.failures=0,d.isBuffering=!1,d.instanceOptions={},d.instanceCount=0,d.loaded=!1,d.metadata={},d.readyState=0,d.muted=!1,d.paused=!1,d.peakData={left:0,right:0},d.waveformData={left:[],right:[]},d.playState=0,d.position=null},e(),this._onTimer=function(a){var e,f=!1,g={};if(d._hasTimer||a)return d._a&&(a||(0<d.playState||1===d.readyState)&&!d.paused)&&(e=d._get_html5_duration(),e!==b&&(b=e,d.duration=e,f=!0),d.durationEstimate=d.duration,e=1e3*d._a.currentTime||0,e!==c&&(c=e,f=!0),(f||a)&&d._whileplaying(e,g,g,g,g)),f},this._get_html5_duration=function(){var a=d._iO,b=d._a?1e3*d._a.duration:a?a.duration:void 0;return b&&!isNaN(b)&&Infinity!==b?b:a?a.duration:null},this._apply_loop=function(a,b){!a.loop&&1<b&&h._wD("Note: Native HTML5 looping is infinite."),a.loop=1<b?"loop":""},this._setup_html5=function(a){var a=D(d._iO,a),b=decodeURI,c=bA?h._global_a:d._a,g=b(a.url),i=c&&c._t?c._t.instanceOptions:null,j;if(c){if(c._t){!bA&&g===b(t)?j=c:bA&&i.url===a.url&&(!t||t===i.url)&&(j=c);if(j)return d._apply_loop(c,a.loops),j}h._wD("setting new URL on existing object: "+g+(t?", old URL: "+t:"")),bA&&c._t&&c._t.playState&&a.url!==i.url&&c._t.stop(),e(i.url?a.url===i.url:t?t===a.url:!1),c.src=a.url,t=d.url=a.url,c._called_load=!1}else if(h._wD("creating HTML5 Audio() element with URL: "+g),c=new Audio(a.url),c._called_load=!1,bA)h._global_a=c;return d.isHTML5=!0,d._a=c,c._t=d,f(),d._apply_loop(c,a.loops),a.autoLoad||a.autoPlay?d.load():(c.autobuffer=!1,c.preload="none",bM||d.load()),c},f=function(){if(d._a._added_events)return!1;var a;h._wD(j+"adding event listeners: "+d.sID),d._a._added_events=!0;for(a in bE)bE.hasOwnProperty(a)&&d._a&&d._a.addEventListener(a,bE[a],!1);return!0},g=function(){var a;h._wD(j+"removing event listeners: "+d.sID),d._a._added_events=!1;for(a in bE)bE.hasOwnProperty(a)&&d._a&&d._a.removeEventListener(a,bE[a],!1)},this._onload=function(a){return a=!!a,h._wD('SMSound._onload(): "'+d.sID+'"'+(a?" loaded.":" failed to load? - "+d.url),a?1:2),!a&&!d.isHTML5&&(!0===h.sandbox.noRemote&&h._wD("SMSound._onload(): "+ba("noNet"),1),!0===h.sandbox.noLocal&&h._wD("SMSound._onload(): "+ba("noLocal"),1)),d.loaded=a,d.readyState=a?3:2,d._onbufferchange(0),d._iO.onload&&d._iO.onload.apply(d,[a]),!0},this._onbufferchange=function(a){return 0===d.playState||a&&d.isBuffering||!a&&!d.isBuffering?!1:(d.isBuffering=1===a,d._iO.onbufferchange&&(h._wD("SMSound._onbufferchange(): "+a),d._iO.onbufferchange.apply(d)),!0)},this._onsuspend=function(){return d._iO.onsuspend&&(h._wD("SMSound._onsuspend()"),d._iO.onsuspend.apply(d)),!0},this._onfailure=function(a,b,c){d.failures++,h._wD('SMSound._onfailure(): "'+d.sID+'" count '+d.failures),d._iO.onfailure&&1===d.failures?d._iO.onfailure(d,a,b,c):h._wD("SMSound._onfailure(): ignoring")},this._onfinish=function(){var a=d._iO.onfinish;d._onbufferchange(0),d._resetOnPosition(0),d.instanceCount&&(d.instanceCount--,d.instanceCount||(q(),d.playState=0,d.paused=!1,d.instanceCount=0,d.instanceOptions={},d._iO={},k()),(!d.instanceCount||d._iO.multiShotEvents)&&a&&(h._wD('SMSound._onfinish(): "'+d.sID+'"'),a.apply(d)))},this._whileloading=function(a,b,c,e){var f=d._iO;d.bytesLoaded=a,d.bytesTotal=b,d.duration=Math.floor(c),d.bufferLength=e;if(f.isMovieStar)d.durationEstimate=d.duration;else if(d.durationEstimate=f.duration?d.duration>f.duration?d.duration:f.duration:parseInt(d.bytesTotal/d.bytesLoaded*d.duration,10),"undefined"==typeof d.durationEstimate)d.durationEstimate=d.duration;3!==d.readyState&&f.whileloading&&f.whileloading.apply(d)},this._whileplaying=function(a,b,c,e,f){var g=d._iO;return isNaN(a)||null===a?!1:(d.position=a,d._processOnPosition(),!d.isHTML5&&8<r&&(g.usePeakData&&"undefined"!=typeof b&&b&&(d.peakData={left:b.leftPeak,right:b.rightPeak}),g.useWaveformData&&"undefined"!=typeof c&&c&&(d.waveformData={left:c.split(","),right:e.split(",")}),g.useEQData&&"undefined"!=typeof f&&f&&f.leftEQ&&(a=f.leftEQ.split(","),d.eqData=a,d.eqData.left=a,"undefined"!=typeof f.rightEQ&&f.rightEQ)&&(d.eqData.right=f.rightEQ.split(","))),1===d.playState&&(!d.isHTML5&&8===r&&!d.position&&d.isBuffering&&d._onbufferchange(0),g.whileplaying&&g.whileplaying.apply(d)),!0)},this._oncaptiondata=function(a){h._wD('SMSound._oncaptiondata(): "'+this.sID+'" caption data received.'),d.captiondata=a,d._iO.oncaptiondata&&d._iO.oncaptiondata.apply(d)},this._onmetadata=function(a,b){h._wD('SMSound._onmetadata(): "'+this.sID+'" metadata received.');var c={},e,f;for(e=0,f=a.length;e<f;e++)c[a[e]]=b[e];d.metadata=c,d._iO.onmetadata&&d._iO.onmetadata.apply(d)},this._onid3=function(a,b){h._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var c=[],e,f;for(e=0,f=a.length;e<f;e++)c[a[e]]=b[e];d.id3=D(d.id3,c),d._iO.onid3&&d._iO.onid3.apply(d)},this._onconnect=function(a){a=1===a,h._wD('SMSound._onconnect(): "'+d.sID+'"'+(a?" connected.":" failed to connect? - "+d.url),a?1:2);if(d.connected=a)d.failures=0,bh(d.sID)&&(d.getAutoPlay()?d.play(void 0,d.getAutoPlay()):d._iO.autoLoad&&d.load()),d._iO.onconnect&&d._iO.onconnect.apply(d,[a])},this._ondataerror=function(a){0<d.playState&&(h._wD("SMSound._ondataerror(): "+a),d._iO.ondataerror&&d._iO.ondataerror.apply(d))}},Q=function(){return o.body||o._docElement||o.getElementsByTagName("div")[0]},k=function(a){return o.getElementById(a)},D=function(a,b){var c={},d,e;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);d="undefined"==typeof b?h.defaultOptions:b;for(e in d)d.hasOwnProperty(e)&&"undefined"==typeof c[e]&&(c[e]=d[e]);return c},by=function(){function a(a){var a=bz.call(a),b=a.length;return c?(a[1]="on"+a[1],3<b&&a.pop()):3===b&&a.push(!1),a}function b(a,b){var e=a.shift(),f=[d[b]];c?e[f](a[0],a[1]):e[f].apply(e,a)}var c=m.attachEvent,d={add:c?"attachEvent":"addEventListener",remove:c?"detachEvent":"removeEventListener"};return{add:function(){b(a(arguments),"add")},remove:function(){b(a(arguments),"remove")}}}(),bE={abort:d(function(){h._wD(j+"abort: "+this._t.sID)}),canplay:d(function(){var a=this._t,b;if(a._html5_canplay)return!0;a._html5_canplay=!0,h._wD(j+"canplay: "+a.sID+", "+a.url),a._onbufferchange(0),b=isNaN(a.position)?null:a.position/1e3;if(a.position&&this.currentTime!==b){h._wD(j+"canplay: setting position to "+b);try{this.currentTime=b}catch(c){h._wD(j+"setting position failed: "+c.message,2)}}a._iO._oncanplay&&a._iO._oncanplay()}),load:d(function(){var a=this._t;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesTotal,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),ended:d(function(){var a=this._t;h._wD(j+"ended: "+a.sID),a._onfinish()}),error:d(function(){h._wD(j+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:d(function(){var a=this._t,b=a.bytesTotal||1;h._wD(j+"loadeddata: "+this._t.sID),!a._loaded&&!bK&&(a.duration=a._get_html5_duration(),a._whileloading(b,b,a._get_html5_duration()),a._onload(!0))}),loadedmetadata:d(function(){h._wD(j+"loadedmetadata: "+this._t.sID)}),loadstart:d(function(){h._wD(j+"loadstart: "+this._t.sID),this._t._onbufferchange(1)}),play:d(function(){h._wD(j+"play: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),playing:d(function(){h._wD(j+"playing: "+this._t.sID),this._t._onbufferchange(0)}),progress:d(function(a){var b=this._t,c,d,e;e=0;var f="progress"===a.type;d=a.target.buffered;var g=a.loaded||0,i=a.total||1;if(b.loaded)return!1;if(d&&d.length){for(c=d.length-1;0<=c;c--)e=d.end(c)-d.start(c);g=e/a.target.duration;if(f&&1<d.length){e=[],d=d.length;for(c=0;c<d;c++)e.push(a.target.buffered.start(c)+"-"+a.target.buffered.end(c));h._wD(j+"progress: timeRanges: "+e.join(", "))}f&&!isNaN(g)&&h._wD(j+"progress: "+b.sID+": "+Math.floor(100*g)+"% loaded")}isNaN(g)||(b._onbufferchange(0),b._whileloading(g,i,b._get_html5_duration()),g&&i&&g===i&&bE.load.call(this,a))}),ratechange:d(function(){h._wD(j+"ratechange: "+this._t.sID)}),suspend:d(function(a){var b=this._t;h._wD(j+"suspend: "+b.sID),bE.progress.call(this,a),b._onsuspend()}),stalled:d(function(){h._wD(j+"stalled: "+this._t.sID)}),timeupdate:d(function(){this._t._onTimer()}),waiting:d(function(){var a=this._t;h._wD(j+"waiting: "+a.sID),a._onbufferchange(1)})},bs=function(a){return!a.serverURL&&(a.type?bt({type:a.type}):bt({url:a.url})||h.html5Only)},bv=function(a){a&&(a.src=bH?"":"about:blank")},bt=function(a){function b(a){return h.preferFlash&&bB&&!h.ignoreFlash&&"undefined"!=typeof h.flash[a]&&h.flash[a]}if(!h.useHTML5Audio||!h.hasHTML5)return!1;var c=a.url||null,a=a.type||null,d=h.audioFormats,e;if(a&&"undefined"!=typeof h.html5[a])return h.html5[a]&&!b(a);if(!bu){bu=[];for(e in d)d.hasOwnProperty(e)&&(bu.push(e),d[e].related&&(bu=bu.concat(d[e].related)));bu=RegExp("\\.("+bu.join("|")+")(\\?.*)?$","i")}return e=c?c.toLowerCase().match(bu):null,!e||!e.length?a?(c=a.indexOf(";"),e=(-1!==c?a.substr(0,c):a).substr(6)):c=!1:e=e[1],e&&"undefined"!=typeof h.html5[e]?c=h.html5[e]&&!b(e):(a="audio/"+e,c=h.html5.canPlayType({type:a}),c=(h.html5[e]=c)&&h.html5[a]&&!b(a)),c},bx=function(){function a(a){var c,d,e=c=!1;if(!b||"function"!=typeof b.canPlayType)return c;if(a instanceof Array){for(c=0,d=a.length;c<d&&!e;c++)if(h.html5[a[c]]||b.canPlayType(a[c]).match(h.html5Test))e=!0,h.html5[a[c]]=!0,h.flash[a[c]]=!(!h.preferFlash||!bB||!a[c].match(bS));c=e}else a=b&&"function"==typeof b.canPlayType?b.canPlayType(a):!1,c=!!a&&!!a.match(h.html5Test);return c}if(!h.useHTML5Audio||"undefined"==typeof Audio)return!1;var b="undefined"!=typeof Audio?bL?new Audio(null):new Audio:null,c,d={},e,f;e=h.audioFormats;for(c in e)if(e.hasOwnProperty(c)&&(d[c]=a(e[c].type),d["audio/"+c]=d[c],h.flash[c]=h.preferFlash&&!h.ignoreFlash&&c.match(bS)?!0:!1,e[c]&&e[c].related))for(f=e[c].related.length-1;0<=f;f--)d["audio/"+e[c].related[f]]=d[c],h.html5[e[c].related[f]]=d[c],h.flash[e[c].related[f]]=d[c];return d.canPlayType=b?a:null,h.html5=D(h.html5,d),!0},L={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",domError:"soundManager::createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:"soundManager::createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+o.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitImpatient:"soundManager: Getting impatient, still waiting for Flash%s...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Retrying, waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- soundManager._debug(): Current sound objects ---",waitEI:"soundManager::initMovie(): Waiting for ExternalInterface call from Flash...",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager::initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",init:"soundManager::init()",didInit:"soundManager::init(): Already called?",flashJS:"soundManager: Attempting JS to Flash call...",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smFail:"soundManager: Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",fbHandler:"soundManager::flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access"},ba=function(){var a=bz.call(arguments),b=a.shift(),b=L&&L[b]?L[b]:"",c,d;if(b&&a&&a.length)for(c=0,d=a.length;c<d;c++)b=b.replace("%s",a[c]);return b},be=function(a){return 8===r&&1<a.loops&&a.stream&&(A("as2loop"),a.stream=!1),a},bf=function(
a,b){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(h._wD((b||"")+ba("policy")),a.usePolicyFile=!0),a},bg=function(a){"undefined"!=typeof console&&"undefined"!=typeof console.warn?console.warn(a):h._wD(a)},p=function(){return!1},X=function(a){for(var b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=p)},Y=function(a){"undefined"==typeof a&&(a=!1);if(y||a)A("smFail",2),h.disable(a)},Z=function(a){var b=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(b=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return a=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+h.movieURL,h.noSWFCache&&(a+="?ts="+(new Date).getTime()),a},J=function(){r=parseInt(h.flashVersion,10),8!==r&&9!==r&&(h._wD(ba("badFV",r,8)),h.flashVersion=r=8);var a=h.debugMode||h.debugFlash?"_debug.swf":".swf";h.useHTML5Audio&&!h.html5Only&&h.audioFormats.mp4.required&&9>r&&(h._wD(ba("needfl9")),h.flashVersion=r=9),h.version=h.versionNumber+(h.html5Only?" (HTML5-only mode)":9===r?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<r?(h.defaultOptions=D(h.defaultOptions,h.flash9Options),h.features.buffering=!0,h.defaultOptions=D(h.defaultOptions,h.movieStarOptions),h.filePatterns.flash9=RegExp("\\.(mp3|"+bW.join("|")+")(\\?.*)?$","i"),h.features.movieStar=!0):h.features.movieStar=!1,h.filePattern=h.filePatterns[8!==r?"flash9":"flash8"],h.movieURL=(8===r?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),h.features.peakData=h.features.waveformData=h.features.eqData=8<r},T=function(a,b){if(!i)return!1;i._setPolling(a,b)},U=function(){h.debugURLParam.test(n)&&(h.debugMode=!0);if(k(h.debugID))return!1;var a,b,c,d;if(h.debugMode&&!k(h.debugID)&&(!bO||!h.useConsole||!h.consoleOnly)){a=o.createElement("div"),a.id=h.debugID+"-toggle",b={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(o.createTextNode("-")),a.onclick=bd,a.title="Toggle SM2 debug console",l.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(d in b)b.hasOwnProperty(d)&&(a.style[d]=b[d]);b=o.createElement("div"),b.id=h.debugID,b.style.display=h.debugMode?"block":"none";if(h.debugMode&&!k(a.id)){try{c=Q(),c.appendChild(a)}catch(e){throw Error(ba("domError")+" \n"+e.toString())}c.appendChild(b)}}},bh=this.getSoundById,A=function(a,b){return a?h._wD(ba(a),b):""},n.indexOf("sm2-debug=alert")+1&&h.debugMode&&(h._wD=function(b){a.alert(b)}),bd=function(){var a=k(h.debugID),b=k(h.debugID+"-toggle");if(!a)return!1;t?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),t=!t},u=function(a,b,c){if("undefined"!=typeof sm2Debugger)try{sm2Debugger.handleEvent(a,b,c)}catch(d){}return!0},bc=function(){var a=[];return h.debugMode&&a.push("sm2_debug"),h.debugFlash&&a.push("flash_debug"),h.useHighPerformance&&a.push("high_performance"),a.join(" ")},bb=function(){var a=ba("fbHandler"),b=h.getMoviePercent(),c={type:"FLASHBLOCK"};if(h.html5Only)return!1;if(h.ok()){if(h.didFlashBlock&&h._wD(a+": Unblocked"),h.oMC)h.oMC.className=[bc(),"movieContainer","swf_loaded"+(h.didFlashBlock?" swf_unblocked":"")].join(" ")}else bq&&(h.oMC.className=bc()+" movieContainer "+(null===b?"swf_timedout":"swf_error"),h._wD(a+": "+ba("fbTimeout")+(b?" ("+ba("fbLoaded")+")":""))),h.didFlashBlock=!0,F({type:"ontimeout",ignoreInit:!0,error:c}),S(c)},E=function(a,b,c){"undefined"==typeof s[a]&&(s[a]=[]),s[a].push({method:b,scope:c||null,fired:!1})},F=function(a){a||(a={type:h.ok()?"onready":"ontimeout"});if(!x&&a&&!a.ignoreInit||"ontimeout"===a.type&&(h.ok()||y&&!a.ignoreInit))return!1;var b={success:a&&a.ignoreInit?h.ok():!y},c=a&&a.type?s[a.type]||[]:[],d=[],e,f=[b],g=bq&&h.useFlashBlock&&!h.ok();a.error&&(f[0].error=a.error);for(b=0,e=c.length;b<e;b++)!0!==c[b].fired&&d.push(c[b]);if(d.length){h._wD("soundManager: Firing "+d.length+" "+a.type+"() item"+(1===d.length?"":"s"));for(b=0,e=d.length;b<e;b++)if(d[b].scope?d[b].method.apply(d[b].scope,f):d[b].method.apply(this,f),!g)d[b].fired=!0}return!0},G=function(){m.setTimeout(function(){h.useFlashBlock&&bb(),F(),"function"==typeof h.onload&&(A("onload",1),h.onload.apply(m),A("onloadOK",1)),h.waitForWindowLoad&&by.add(m,"load",G)},1)},bC=function(){if("undefined"!=typeof bB)return bB;var a=!1,b=navigator,c=b.plugins,d,e=m.ActiveXObject;if(c&&c.length)(b=b.mimeTypes)&&b["application/x-shockwave-flash"]&&b["application/x-shockwave-flash"].enabledPlugin&&b["application/x-shockwave-flash"].enabledPlugin.description&&(a=!0);else if("undefined"!=typeof e){try{d=new e("ShockwaveFlash.ShockwaveFlash")}catch(f){}a=!!d}return bB=a},br=function(){var a,b;if(bG&&l.match(/os (1|2|3_0|3_1)/i)){if(h.hasHTML5=!1,h.html5Only=!0,h.oMC)h.oMC.style.display="none"}else h.useHTML5Audio&&(!h.html5||!h.html5.canPlayType?(h._wD("SoundManager: No HTML5 Audio() support detected."),h.hasHTML5=!1):h.hasHTML5=!0,bN&&h._wD("soundManager::Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(bB?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1));if(h.useHTML5Audio&&h.hasHTML5)for(b in h.audioFormats)h.audioFormats.hasOwnProperty(b)&&(h.audioFormats[b].required&&!h.html5.canPlayType(h.audioFormats[b].type)||h.flash[b]||h.flash[h.audioFormats[b].type])&&(a=!0);return h.ignoreFlash&&(a=!1),h.html5Only=h.hasHTML5&&h.useHTML5Audio&&!a,!h.html5Only},bp=function(a){var b,c,d=0;if(a instanceof Array){for(b=0,c=a.length;b<c;b++)if(a[b]instanceof Object){if(h.canPlayMIME(a[b].type)){d=b;break}}else if(h.canPlayURL(a[b])){d=b;break}a[d].url&&(a[d]=a[d].url),a=a[d]}return a},bk=function(a){a._hasTimer||(a._hasTimer=!0,!bM&&h.html5PollingInterval&&(null===bo&&0===bn&&(bo=m.setInterval(bm,h.html5PollingInterval)),bn++))},bl=function(a){a._hasTimer&&(a._hasTimer=!1,!bM&&h.html5PollingInterval&&bn--)},bm=function(){var a;if(null!==bo&&!bn)return m.clearInterval(bo),bo=null,!1;for(a=h.soundIDs.length-1;0<=a;a--)h.sounds[h.soundIDs[a]].isHTML5&&h.sounds[h.soundIDs[a]]._hasTimer&&h.sounds[h.soundIDs[a]]._onTimer()},S=function(a){a="undefined"!=typeof a?a:{},"function"==typeof h.onerror&&h.onerror.apply(m,[{type:"undefined"!=typeof a.type?a.type:null}]),"undefined"!=typeof a.fatal&&a.fatal&&h.disable()},bD=function(){if(!bN||!bC())return!1;var a=h.audioFormats,b,c;for(c in a)if(a.hasOwnProperty(c)&&("mp3"===c||"mp4"===c))if(h._wD("soundManager: Using flash fallback for "+c+" format"),h.html5[c]=!1,a[c]&&a[c].related)for(b=a[c].related.length-1;0<=b;b--)h.html5[a[c].related[b]]=!1},this._setSandboxType=function(a){var b=h.sandbox;b.type=a,b.description=b.types["undefined"!=typeof b.types[a]?a:"unknown"],h._wD("Flash security sandbox type: "+b.type),"localWithFile"===b.type?(b.noRemote=!0,b.noLocal=!1,A("secNote",2)):"localWithNetwork"===b.type?(b.noRemote=!1,b.noLocal=!0):"localTrusted"===b.type&&(b.noRemote=!1,b.noLocal=!1)},this._externalInterfaceOK=function(a,b){if(h.swfLoaded)return!1;var c,d=(new Date).getTime();h._wD("soundManager::externalInterfaceOK()"+(a?" (~"+(d-a)+" ms)":"")),u("swf",!0),u("flashtojs",!0),h.swfLoaded=!0,bQ=!1,bN&&bD();if(!b||b.replace(/\+dev/i,"")!==h.versionNumber.replace(/\+dev/i,""))return c='soundManager: Fatal: JavaScript file build "'+h.versionNumber+'" does not match Flash SWF build "'+b+'" at '+h.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(c)},0),!1;setTimeout(q,bI?100:1)},R=function(a,b){function c(){h._wD("-- SoundManager 2 "+h.version+(!h.html5Only&&h.useHTML5Audio?h.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(h.html5Only?"":(h.useHighPerformance?", high performance mode, ":", ")+((h.flashPollingInterval?"custom ("+h.flashPollingInterval+"ms)":"normal")+" polling")+(h.wmode?", wmode: "+h.wmode:"")+(h.debugFlash?", flash debug mode":"")+(h.useFlashBlock?", flashBlock mode":""))+" --",1)}function d(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(v&&w)return!1;if(h.html5Only)return J(),c(),h.oMC=k(h.movieID),q(),w=v=!0,!1;var e=b||h.url,f=h.altURL||e,g;g=Q();var i,j,m=bc(),n,p=null,p=(p=o.getElementsByTagName("html")[0])&&p.dir&&p.dir.match(/rtl/i),a="undefined"==typeof a?h.id:a;J(),h.url=Z(bT?e:f),b=h.url,h.wmode=!h.wmode&&h.useHighPerformance?"transparent":h.wmode,null!==h.wmode&&(l.match(/msie 8/i)||!bI&&!h.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(A("spcWmode"),h.wmode=null),g={name:a,id:a,src:b,quality:"high",allowScriptAccess:h.allowScriptAccess,bgcolor:h.bgColor,pluginspage:bU+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:h.wmode,hasPriority:"true"},h.debugFlash&&(g.FlashVars="debug=1"),h.wmode||delete g.wmode;if(bI)e=o.createElement("div"),j=['<object id="'+a+'" data="'+b+'" type="'+g.type+'" title="'+g.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+bU+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',d("movie",b),d("AllowScriptAccess",h.allowScriptAccess),d("quality",g.quality),h.wmode?d("wmode",h.wmode):"",d("bgcolor",h.bgColor),d("hasPriority","true"),h.debugFlash?d("FlashVars",g.FlashVars):"","</object>"].join("");else for(i in e=o.createElement("embed"),g)g.hasOwnProperty(i)&&e.setAttribute(i,g[i]);U(),m=bc();if(g=Q())if(h.oMC=k(h.movieID)||o.createElement("div"),h.oMC.id)n=h.oMC.className,h.oMC.className=(n?n+" ":"movieContainer")+(m?" "+m:""),h.oMC.appendChild(e),bI&&(i=h.oMC.appendChild(o.createElement("div")),i.className="sm2-object-box",i.innerHTML=j),w=!0;else{h.oMC.id=h.movieID,h.oMC.className="movieContainer "+m,i=m=null;if(!h.useFlashBlock)if(h.useHighPerformance)m={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"};else if(m={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},p)m.left=Math.abs(parseInt(m.left,10))+"px";bJ&&(h.oMC.style.zIndex=1e4);if(!h.debugFlash)for(n in m)m.hasOwnProperty(n)&&(h.oMC.style[n]=m[n]);try{bI||h.oMC.appendChild(e),g.appendChild(h.oMC),bI&&(i=h.oMC.appendChild(o.createElement("div")),i.className="sm2-object-box",i.innerHTML=j),w=!0}catch(r){throw Error(ba("domError")+" \n"+r.toString())}}return v=!0,c(),h._wD("soundManager::createMovie(): Trying to load "+b+(!bT&&h.altURL?" (alternate URL)":""),1),!0},M=function(){return h.html5Only?(R(),!1):i?!1:(i=h.getMovie(h.id),i||($?(bI?h.oMC.innerHTML=_:h.oMC.appendChild($),$=null,v=!0):R(h.id,h.url),i=h.getMovie(h.id)),i&&A("waitEI"),"function"==typeof h.oninitmovie&&setTimeout(h.oninitmovie,1),!0)},H=function(){setTimeout(I,1e3)},I=function(){var a,b=!1;if(bi)return!1;bi=!0,by.remove(m,"load",H);if(bQ&&!bP)return A("waitFocus"),!1;x||(a=h.getMoviePercent(),h._wD(ba("waitImpatient",0<a?" (SWF "+a+"% loaded)":"")),0<a&&100>a&&(b=!0)),setTimeout(function(){a=h.getMoviePercent();if(b)return bi=!1,h._wD(ba("waitSWF")),m.setTimeout(H,1),!1;x||(h._wD("soundManager: No Flash response within expected time.\nLikely causes: "+(0===a?"Loading "+h.movieURL+" may have failed (and/or Flash "+r+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(h.debugFlash?" "+ba("checkSWF"):""),2),!bT&&a&&(A("localFail",2),h.debugFlash||A("tryDebug",2)),0===a&&h._wD(ba("swf404",h.url)),u("flashtojs",!1,": Timed out"+bT?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")),!x&&bR&&(null===a?h.useFlashBlock||0===h.flashLoadTimeout?(h.useFlashBlock&&bb(),A("waitForever")):Y(!0):0===h.flashLoadTimeout?A("waitForever"):Y(!0))},h.flashLoadTimeout)},K=function(){return bP||!bQ?(by.remove(m,"focus",K),!0):(bP=bR=!0,h._wD("soundManager: Got window focus."),bi=!1,H(),by.remove(m,"focus",K),!0)},bF=function(){var a,b=[];if(h.useHTML5Audio&&h.hasHTML5){for(a in h.audioFormats)h.audioFormats.hasOwnProperty(a)&&b.push(a+": "+h.html5[a]+(!h.html5[a]&&bB&&h.flash[a]?" (using flash)":h.preferFlash&&h.flash[a]&&bB?" (preferring flash)":h.html5[a]?"":" ("+(h.audioFormats[a].required?"required, ":"")+"and no flash support)"));h._wD("-- SoundManager 2: HTML5 support tests ("+h.html5Test+"): "+b.join(", ")+" --",1)}},C=function(a){if(x)return!1;if(h.html5Only)return h._wD("-- SoundManager 2: loaded --"),x=!0,G(),u("onload",!0),!0;var b=!0,c;if(!h.useFlashBlock||!h.flashLoadTimeout||h.getMoviePercent())x=!0,y&&(c={type:!bB&&bq?"NO_FLASH":"INIT_TIMEOUT"});return h._wD("-- SoundManager 2 "+(y?"failed to load":"loaded")+" ("+(y?"security/load error":"OK")+") --",1),y||a?(h.useFlashBlock&&h.oMC&&(h.oMC.className=bc()+" "+(null===h.getMoviePercent()?"swf_timedout":"swf_error")),F({type:"ontimeout",error:c,ignoreInit:!0}),u("onload",!1),S(c),b=!1):u("onload",!0),y||(h.waitForWindowLoad&&!z?(A("waitOnload"),by.add(m,"load",G)):(h.waitForWindowLoad&&z&&A("docLoaded"),G())),b},q=function(){A("init");if(x)return A("didInit"),!1;if(h.html5Only)return x||(by.remove(m,"load",h.beginDelayedInit),h.enabled=!0,C()),!0;M();try{A("flashJS"),i._externalInterfaceTest(!1),T(!0,h.flashPollingInterval||(h.useHighPerformance?10:50)),h.debugMode||i._disableDebug(),h.enabled=!0,u("jstoflash",!0),h.html5Only||by.add(m,"unload",p)}catch(a){return h._wD("js/flash exception: "+a.toString()),u("jstoflash",!1),S({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),Y(!0),C(),!1}return C(),by.remove(m,"load",h.beginDelayedInit),!0},N=function(){if(P)return!1;P=!0,U();var a=n.toLowerCase(),b=null,b=null,c="undefined"!=typeof console&&"function"==typeof console.log;return-1!==a.indexOf("sm2-usehtml5audio=")&&(b="1"===a.charAt(a.indexOf("sm2-usehtml5audio=")+18),c&&console.log((b?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),h.useHTML5Audio=b),-1!==a.indexOf("sm2-preferflash=")&&(b="1"===a.charAt(a.indexOf("sm2-preferflash=")+16),c&&console.log((b?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),h.preferFlash=b),!bB&&h.hasHTML5&&(h._wD("SoundManager: No Flash detected"+(h.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),h.useHTML5Audio=!0,h.preferFlash=!1),bx(),h.html5.usingFlash=br(),bq=h.html5.usingFlash,bF(),!bB&&bq&&(h._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available."),h.flashLoadTimeout=1),o.removeEventListener&&o.removeEventListener("DOMContentLoaded",N,!1),M(),!0},bw=function(){return"complete"===o.readyState&&(N(),o.detachEvent("onreadystatechange",bw)),!0},O=function(){z=!0,by.remove(m,"load",O)},bC(),by.add(m,"focus",K),by.add(m,"load",H),by.add(m,"load",O),o.addEventListener?o.addEventListener("DOMContentLoaded",N,!1):o.attachEvent?o.attachEvent("onreadystatechange",bw):(u("onload",!1),S({type:"NO_DOM2_EVENTS",fatal:!0})),"complete"===o.readyState&&setTimeout(N,100)}var c=null;if("undefined"==typeof SM2_DEFER||!SM2_DEFER)c=new b;a.SoundManager=b,a.soundManager=c})(window)